# üß† Smart Money Engine - –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã (v2.0)

## üöÄ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è

Smart Money Engine –ø—Ä–æ—à–µ–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—é, –ø—Ä–µ–≤—Ä–∞—Ç–∏–≤—à–∏—Å—å –∏–∑ –ø—Ä–æ—Å—Ç–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Ç–æ—Ä–≥–æ–≤—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π, API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º —Å–∫–æ—Ä–∏–Ω–≥–æ–º —Å–∏–≥–Ω–∞–ª–æ–≤.

## üìã –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### **–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
1. **–û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫** (`index.js` + `analysis_engine.js`) - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è production –≤–µ—Ä—Å–∏—è
2. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫** (`analysis_engine_enhanced.js`) - –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ API

## üîÑ –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)

### 1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã** (`index.js`)

```javascript
// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏)
const globalServices = {
  cache: getCacheManager(),                    // Redis –∫—ç—à
  priorityManager: getPriorityManager(),       // –û—á–µ—Ä–µ–¥—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤  
  historicalService: new HistoricalDataService(), // –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
  signalTracker: new SignalTracker(),          // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
  notificationService: new NotificationService(), // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  
  // üÜï –ù–û–í–´–ï –°–ï–†–í–ò–°–´:
  analysisSaver: new AnalysisSaver(),          // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–æ–≤
  technicalDashboard: new TechnicalDashboard(), // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π dashboard
  signalDeduplication: new SignalDeduplication(), // –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
  enhancedMonitoring: new EnhancedMonitoring()  // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
};
```

### 2. **–£–ª—É—á—à–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∞–Ω–∞–ª–∏–∑–∞ (–∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç)**

```javascript
async function runAnalysisCycle() {
  // 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ —Å real-time —Ü–µ–Ω–∞–º–∏
  await signalTracker.updateSignals(priceGetter);
  
  // 2. –í—ã–±–æ—Ä –¥–≤–∏–∂–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
  if (process.env.USE_ENHANCED_ENGINE === 'true') {
    await analyzeAllCoinsEnhanced(); // –ù–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ —Å API
  } else {
    await analyzeAllCoins();         // –°—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫
  }
  
  // 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  await generateCycleSummary();
}
```

## üìä –ù–æ–≤—ã–µ —ç—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### **–≠—Ç–∞–ø 1: Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤**

```javascript
// –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω
const priceGetter = async (symbol) => {
  try {
    const AggregatedData = getOrCreateModel('AggregatedDataForPrices');
    const aggregated = await AggregatedData.findOne({ symbol });
    return aggregated?.price;
  } catch (error) {
    console.error(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã –¥–ª—è ${symbol}:`, error.message);
    return null;
  }
};

await signalTracker.updateSignals(priceGetter);
```

### **–≠—Ç–∞–ø 2: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏**

```javascript
async function normalizeMarketData() {
  const rawDataList = await CoinMarketData.find({}).lean();
  
  for (const doc of rawDataList) {
    // üÜï –†–∞—Å—á–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
    const technicalIndicators = calculateTechnicalIndicators(doc.bybit.kline);
    
    const aggregatedDoc = {
      symbol: doc.symbol,
      price: calculatePrice(doc),
      avg_funding_rate: calculateAvgFunding(doc.coinglass.pairs_markets),
      sum_long_liquidations_usd: sumLongLiquidations(doc),
      sum_short_liquidations_usd: sumShortLiquidations(doc),
      avg_open_interest_usd: calculateAvgOI(doc),
      
      // üÜï –ù–û–í–û–ï: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
      technical_indicators: {
        rsi: technicalIndicators.rsi,
        rsi_signal: technicalIndicators.rsiSignal,
        ema_20: technicalIndicators.ema20,
        ema_50: technicalIndicators.ema50,
        ema_trend: technicalIndicators.emaTrend,
        bb_upper: technicalIndicators.bbUpper,
        bb_middle: technicalIndicators.bbMiddle,
        bb_lower: technicalIndicators.bbLower,
        bb_position: technicalIndicators.bbPosition,
        atr: technicalIndicators.atr,
        atr_signal: technicalIndicators.atrSignal,
        volume_ma: technicalIndicators.volumeMA,
        volume_strength: technicalIndicators.volumeStrength,
        overall_signal: technicalIndicators.overallSignal
      }
    };
    
    await AggregatedCoinData.findOneAndUpdate({ symbol }, aggregatedDoc, { upsert: true });
  }
}
```

### **–≠—Ç–∞–ø 3: –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º —Å–∫–æ—Ä–∏–Ω–≥–æ–º**

```javascript
async function analyzeAllCoinsEnhanced() {
  const candidateSignals = [];
  
  for (const coin of analyzableCoins) {
    // 1. –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑ Smart Money
    const analysisResult = analyzeCoin(coin, config);
    
    // üÜï 2. –†–∞—Å—á–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–æ—Ä–∞
    const technicalScore = TechnicalDashboard.getTechnicalScore(coin.technical_indicators);
    
    // üÜï 3. –§–∏–Ω–∞–ª—å–Ω—ã–π –º–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥
    const finalScore = SignalScoring.calculateFinalScore(
      analysisResult,
      coin,
      technicalScore
    );
    
    // üÜï 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞ –≤ analysis_results
    await analysisSaver.saveAnalysisResult(
      coin.symbol,
      analysisResult,
      coin,
      technicalScore,
      finalScore,
      processingTime
    );
    
    // üÜï 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
    if (analysisResult.recommendation !== 'wait') {
      const isDuplicate = await signalDeduplication.isDuplicateSignal(
        coin.symbol,
        analysisResult.recommendation,
        analysisResult
      );
      
      if (!isDuplicate && finalScore >= 60) {
        candidateSignals.push({
          symbol: coin.symbol,
          analysisResult,
          marketData: coin,
          technicalScore,
          finalScore,
          technicalAnalysis: TechnicalDashboard.formatTechnicalAnalysis(coin)
        });
      }
    }
  }
  
  // üÜï 6. –û—Ç–±–æ—Ä —Ç–æ–ø-N —Å–∏–≥–Ω–∞–ª–æ–≤
  const selectedSignals = await TopNSelector.selectTopSignals(candidateSignals, 5);
  
  // üÜï 7. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
  for (const signal of selectedSignals) {
    await signalTracker.createSignal(signal.analysisResult, signal.marketData);
  }
  
  // üÜï 8. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å–≤–æ–¥–∫–∏
  const summary = enhancedMonitoring.generateCycleSummary(
    analyzableCoins,
    selectedSignals,
    cycleTime
  );
  
  return summary;
}
```

## üéØ –ù–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∫–æ—Ä–∏–Ω–≥–∞

### **–ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏:**

```javascript
const components = {
  confidence: getConfidenceScore(analysisResult.confidence),      // 20%
  technical: normalizeTechnicalScore(technicalScore),            // 15%
  smartMoney: getSmartMoneyScore(marketData),                    // 25%
  volume: getVolumeScore(marketData),                            // 10%
  liquidations: getLiquidationScore(marketData),                 // 15%
  openInterest: getOpenInterestScore(marketData),                // 5%
  fundingRate: getFundingRateScore(marketData),                  // 5%
  riskReward: getRiskRewardScore(analysisResult)                 // 5%
};

// –í–µ—Å–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const weights = {
  confidence: 0.20,    // –ë–∞–∑–æ–≤–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∞
  technical: 0.15,     // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
  smartMoney: 0.25,    // Smart Money —Ñ–∞–∫—Ç–æ—Ä—ã (–≥–ª–∞–≤–Ω—ã–π)
  volume: 0.10,        // –û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤
  liquidations: 0.15,  // –õ–∏–∫–≤–∏–¥–∞—Ü–∏–∏
  openInterest: 0.05,  // –û—Ç–∫—Ä—ã—Ç—ã–π –∏–Ω—Ç–µ—Ä–µ—Å
  fundingRate: 0.05,   // –§–∞–Ω–¥–∏–Ω–≥ —Ä–µ–π—Ç
  riskReward: 0.05     // –†–∏—Å–∫/–ø—Ä–∏–±—ã–ª—å
};

// –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫–æ—Ä –æ—Ç 0 –¥–æ 100
let finalScore = 0;
Object.entries(weights).forEach(([key, weight]) => {
  finalScore += (components[key] || 0) * weight;
});

// –ë–æ–Ω—É—Å—ã –∑–∞ –æ—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è
finalScore += calculateBonuses(analysisResult, marketData);
```

## üìä –ù–æ–≤–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è analysis_results

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**

```javascript
{
  symbol: "BTC",
  price: 45000,
  timestamp: "2024-01-15T10:30:00Z",
  
  // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
  technical: {
    rsi: 45.2,
    rsi_signal: "neutral",
    ema_20: 44500,
    ema_50: 44000,
    ema_trend: "uptrend",
    bb_upper: 46000,
    bb_middle: 45000,
    bb_lower: 44000,
    bb_position: "middle",
    atr: 1200,
    atr_signal: "normal",
    volume_ma: 1500000,
    volume_strength: "strong",
    overall_signal: "bullish"
  },
  
  // Smart Money —Ñ–∞–∫—Ç–æ—Ä—ã
  smart_money: {
    avg_funding_rate: 0.0001,
    funding_signal: "neutral",
    long_liquidations: 5000000,
    short_liquidations: 3000000,
    total_liquidations: 8000000,
    liquidation_bias: "long_heavy",
    liquidation_ratio: 1.67,
    open_interest: 500000000,
    oi_signal: "high",
    volume_24h: 1000000000
  },
  
  // –§–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
  analysis: {
    recommendation: "buy",
    confidence: 0.85,
    final_score: 89,
    technical_score: 45,
    reasoning: [
      "üí• –ü–µ—Ä–µ–≤–µ—Å –ª–æ–Ω–≥-–ª–∏–∫–≤–∏–¥–∞—Ü–∏–π",
      "üìä RSI –≤ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–π –∑–æ–Ω–µ",
      "üìà –í–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥ EMA"
    ],
    entry_zone: { from: 44640, to: 45360 },
    stop_loss: 44460,
    take_profit: 46125,
    risk_reward_ratio: 2.1
  },
  
  // –†—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
  market_context: {
    market_phase: "bull_market",
    total_market_liquidations: 8000000
  },
  
  // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  processing_time_ms: 45,
  version: "1.0"
}
```

## üö´ –°–∏—Å—Ç–µ–º–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

### **–£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:**

```javascript
async function isDuplicateSignal(symbol, type, analysisResult) {
  // 1. –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∫—ç—à—É
  const cacheKey = `${symbol}_${type}`;
  if (this.cache.has(cacheKey)) {
    return true;
  }
  
  // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —á–∞—Å–∞)
  const recentSignal = await Signal.findOne({
    symbol: symbol,
    type: type,
    created_at: { $gte: new Date(Date.now() - 2 * 60 * 60 * 1000) }
  });
  
  if (recentSignal) {
    // 3. –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ñ–∞–∫–∫–∞—Ä–∞)
    const oldReasons = new Set(recentSignal.reasoning);
    const newReasons = new Set(analysisResult.reasoning);
    const similarity = intersection.size / union.size;
    
    // –ï—Å–ª–∏ —Å—Ö–æ–∂–µ—Å—Ç—å > 60%, —Å—á–∏—Ç–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç–æ–º
    return similarity >= 0.6;
  }
  
  return false;
}
```

## üèÜ –°–∏—Å—Ç–µ–º–∞ –æ—Ç–±–æ—Ä–∞ —Ç–æ–ø-N —Å–∏–≥–Ω–∞–ª–æ–≤

### **–ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ç–±–æ—Ä–∞:**

```javascript
async function selectTopSignals(candidateSignals, maxSignals = 5) {
  // 1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É —Å–∫–æ—Ä—É (60+)
  const qualifiedSignals = candidateSignals.filter(s => s.finalScore >= 60);
  
  // 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø—É —Å–∏–≥–Ω–∞–ª–∞
  const groups = { buy: [], sell: [] };
  qualifiedSignals.forEach(signal => {
    groups[signal.analysisResult.recommendation].push(signal);
  });
  
  // 3. –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–º–∞–∫—Å–∏–º—É–º 80% –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞)
  const maxPerType = Math.ceil(maxSignals * 0.8);
  const selectedBuy = groups.buy.slice(0, Math.min(maxPerType, groups.buy.length));
  const selectedSell = groups.sell.slice(0, Math.min(maxPerType, groups.sell.length));
  
  // 4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —Å–∫–æ—Ä—É
  const balanced = [...selectedBuy, ...selectedSell];
  const sorted = balanced.sort((a, b) => b.finalScore - a.finalScore);
  
  // 5. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–±–æ—Ä
  return sorted.slice(0, maxSignals);
}
```

## üåê REST API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º

### **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

```javascript
// –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–Ω–µ—Ç—ã
GET /api/smart-indicators/BTC
{
  "symbol": "BTC",
  "price": 45000,
  "technical_indicators": {
    "rsi": { "value": 45.2, "signal": "neutral", "interpretation": "‚ö™ –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞" },
    "ema": { "trend": "uptrend", "interpretation": "üìà –í–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥" }
  },
  "analysis": {
    "recommendation": "buy",
    "confidence": 85,
    "final_score": 89
  }
}

// –¢–æ–ø —Å–∏–≥–Ω–∞–ª—ã
GET /api/smart-indicators/top-signals?limit=5
{
  "total_signals": 3,
  "data": [
    {
      "symbol": "BTC",
      "recommendation": "buy",
      "final_score": 89,
      "confidence": 85,
      "reasoning": ["üí• –ü–µ—Ä–µ–≤–µ—Å –ª–æ–Ω–≥-–ª–∏–∫–≤–∏–¥–∞—Ü–∏–π", "üìà –í–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥"]
    }
  ]
}

// –û–±–∑–æ—Ä —Ä—ã–Ω–∫–∞
GET /api/smart-indicators/market-overview
{
  "total_analyses": 69,
  "recommendations": {
    "buy": { "count": 15, "avg_score": 78 },
    "sell": { "count": 8, "avg_score": 72 }
  },
  "market_sentiment": "bullish"
}
```

## üìà –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### **–ö—Ä–∞—Å–∏–≤—ã–µ —Å–≤–æ–¥–∫–∏ —Ü–∏–∫–ª–æ–≤:**

```
üìä ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìä –°–í–û–î–ö–ê –¶–ò–ö–õ–ê –ê–ù–ê–õ–ò–ó–ê - 15.01.2024, 10:30:00
üìä ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚è±Ô∏è  –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:
   ‚ö° –í—Ä–µ–º—è —Ü–∏–∫–ª–∞: 2–º 15—Å
   üìà –°–∫–æ—Ä–æ—Å—Ç—å: 30.7 –º–æ–Ω–µ—Ç/—Å–µ–∫
   üéØ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 87.3/100

üí∞ –ê–ù–ê–õ–ò–ó –ú–û–ù–ï–¢:
   üìä –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: 69 –º–æ–Ω–µ—Ç
   ‚è±Ô∏è  –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: 32–º—Å/–º–æ–Ω–µ—Ç—É
   üíé –¢–æ–ø –ø–æ –æ–±—ä–µ–º—É: BTC, ETH, SOL

üéØ –°–û–ó–î–ê–ù–ù–´–ï –°–ò–ì–ù–ê–õ–´:
   ‚úÖ –í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤: 3
   üü¢ BUY: 2 | üî¥ SELL: 1
   üìä –°—Ä–µ–¥–Ω–∏–π —Å–∫–æ—Ä: 84.7
   üéØ –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 87.3%
   üìã –î–µ—Ç–∞–ª–∏:
      1. üü¢ BTC - Score: 89, Conf: 85%
      2. üü¢ ETH - Score: 82, Conf: 78%
      3. üî¥ SOL - Score: 83, Conf: 89%

üìà –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
   üîÑ –í—Å–µ–≥–æ —Ü–∏–∫–ª–æ–≤: 144
   üìä –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 9936 –º–æ–Ω–µ—Ç
   üéØ –í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤: 127
   ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 78.5%
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
smart_money_engine/
‚îú‚îÄ‚îÄ index.js                    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
‚îú‚îÄ‚îÄ analysis_engine.js          # –ë–∞–∑–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ –∞–Ω–∞–ª–∏–∑–∞
‚îú‚îÄ‚îÄ analysis_engine_enhanced.js # –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Å API
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ Signal.js              # –ú–æ–¥–µ–ª—å —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ AnalysisResults.js     # üÜï –ú–æ–¥–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ signal_tracker.js      # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ analysis_saver.js      # üÜï –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ signal_deduplication.js # üÜï –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ signal_scoring.js      # üÜï –°–∫–æ—Ä–∏–Ω–≥
‚îÇ   ‚îú‚îÄ‚îÄ top_n_selector.js      # üÜï –û—Ç–±–æ—Ä —Ç–æ–ø-N
‚îÇ   ‚îî‚îÄ‚îÄ enhanced_monitoring.js # üÜï –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ score.js               # Smart Money –∞–Ω–∞–ª–∏–∑
‚îÇ   ‚îú‚îÄ‚îÄ indicators.js          # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ technical_dashboard.js # üÜï –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π dashboard
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ smart_indicators_api.js # üÜï REST API
```

## üöÄ –ö–∞–∫ —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**

1. **‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ (`index.js` + `analysis_engine.js`)
2. **üÜï –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≥–æ—Ç–æ–≤–∞** - –Ω–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ —Å API (`analysis_engine_enhanced.js`)
3. **üìä –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** - –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `analysis_results`
4. **üåê API –¥–æ—Å—Ç—É–ø–µ–Ω** - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
5. **üö´ –î—É–±–ª–∏–∫–∞—Ç—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã** - —É–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
6. **üèÜ –¢–æ–ª—å–∫–æ –ª—É—á—à–∏–µ —Å–∏–≥–Ω–∞–ª—ã** - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥ –∏ —Ç–æ–ø-N –æ—Ç–±–æ—Ä

### **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏:**

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
USE_ENHANCED_ENGINE=false node index.js

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å API
USE_ENHANCED_ENGINE=true node index.js

# –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä –æ—Ç–¥–µ–ª—å–Ω–æ
node api_server.js
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ø —Å–∏–≥–Ω–∞–ª—ã
curl http://localhost:3001/api/smart-indicators/top-signals

# –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ BTC
curl http://localhost:3001/api/smart-indicators/BTC

# –û–±–∑–æ—Ä —Ä—ã–Ω–∫–∞
curl http://localhost:3001/api/smart-indicators/market-overview
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è v2.0

### **1. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞** üìä
- –í—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤–∏–¥–Ω—ã —á–µ—Ä–µ–∑ API
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞
- –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Å —ç–º–æ–¥–∑–∏

### **2. –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤** üéØ
- –ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥ (8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É —Å–∫–æ—Ä—É (60+)
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –º–µ–∂–¥—É buy/sell

### **3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** üö´
- –£–º–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏–∑–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—Ö–æ–∂–µ—Å—Ç–∏ –ñ–∞–∫–∫–∞—Ä–∞

### **4. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** üåê
- REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### **5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** üìà
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–≤–æ–¥–∫–∏ —Ü–∏–∫–ª–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –¢—Ä–µ–Ω–¥—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### **–ë–ª–∏–∂–∞–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- Real-time WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω
- Telegram –±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Web dashboard –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

### **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏:**
- Machine Learning –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–∫–æ—Ä–∏–Ω–≥–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–æ—Ä–≥–æ–≤—ã–º–∏ –±–∏—Ä–∂–∞–º–∏
- –ü–æ—Ä—Ç—Ñ–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–∫–æ–ø–∏-—Ç—Ä–µ–π–¥–∏–Ω–≥)

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Ç–æ—Ä–≥–æ–≤—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –∞–Ω–∞–ª–∏–∑–∞, API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é. üöÄ