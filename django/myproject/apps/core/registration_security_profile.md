
# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ API
–∞ —Ç–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ 

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –≤ –±–¥ –≤ —à–∏—Ñ—Ä–æ–≤–æ–Ω–æ–º –≤–∏–¥–µ —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–∞ —à–µ—Ñ—Ä–æ–≤–∞–Ω–∏–µ—è

## ‚úÖ 1. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `email` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω.
- `password` ‚Äî —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å.
- `referral_code` ‚Äî (—Å–∏—Å—Ç–µ–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤).
- `captcha` ‚Äî reCAPTCHA v2/v3 –∏–ª–∏ hCaptcha.
- `otp_token` ‚Äî –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `confirm_password` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è.
- `accept_terms` ‚Äî —Ñ–ª–∞–∂–æ–∫ "–ø—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è".
- `language` ‚Äî ru / en / es.
- `marketing_optin` ‚Äî —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É.

## üîê 2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ CAPTCHA:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Google reCAPTCHA v2 –∏–ª–∏ v3** (—á–µ—Ä–µ–∑ `django-recaptcha` –∏–ª–∏ REST-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é).


### ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ IP:
- –í–∫–ª—é—á–∏—Ç—å `throttling` –≤ DRF.
- –ú–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `django-axes` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ IP.

### ‚úÖ Email-–∫–æ–¥ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ TOTP):
- 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –Ω–∞ –ø–æ—á—Ç—É –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π 2FA.
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏: 5‚Äì10 –º–∏–Ω—É—Ç.
- –û—Ç–¥–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è OTP –ø–æ email.

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email:
- –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ —Å–æ —Å—Å—ã–ª–∫–æ–π `/activate/<uid>/<token>/`.
- –î–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è `is_active=False`.
- –°–µ—Ä–≤–∏—Å: **SendGrid**, **Amazon SES**, **Resend**, **Mailjet**

## üß† 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è

–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å —É—Å–ª–æ–≤–∏—è–º:
- –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤,
- –º–∏–Ω–∏–º—É–º 1 –±—É–∫–≤–∞,
- –º–∏–Ω–∏–º—É–º 1 —Ü–∏—Ñ—Ä–∞.

## üë§ 4. –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç

### API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| `GET` | `/api/auth/profile/` | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å |
| `PATCH` | `/api/auth/profile/` | –û–±–Ω–æ–≤–∏—Ç—å `username`, `email`, `language`, `theme` |
| `POST` | `/api/auth/2fa/enable/` | –í–∫–ª—é—á–∏—Ç—å 2FA |
| `POST` | `/api/auth/2fa/confirm/` | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å 2FA |
| `POST` | `/api/auth/verify-email-otp/` | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email-–∫–æ–¥ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ TOTP) |
| `POST` | `/api/auth/send-email-verification/` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email |
| `GET` | `/api/auth/security-status/` | –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å 2FA, email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω, IP –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞ |

### –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –ø–æ–ª—è:
- `username`
- `email`
- `language`
- `theme`
- `referral_count`
- `total_deposit_amount`
- `total_payout_amount`
- `active_investment`
- `registration_date`
- `email_confirmed`
- `two_factor_enabled`
- `last_login_ip`

## üéÅ 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å               | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------------------------|------------|
| üìú –ò—Å—Ç–æ—Ä–∏—è –≤—Ö–æ–¥–æ–≤         | IP, —Å—Ç—Ä–∞–Ω–∞, –≤—Ä–µ–º—è, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ |
| üìä –õ–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏         | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –¥–µ–ø–æ–∑–∏—Ç—ã, –≤—ã–≤–æ–¥—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| üîí –ü—Ä–∏–≤—è–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤     | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ª–æ–≥–∏–Ω–æ–≤ —Å –Ω–µ–∑–Ω–∞–∫–æ–º—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ |
| üîó –†–µ–∂–∏–º "—Ç–æ–ª—å–∫–æ –ø–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—é" | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–∞–ª–∏–¥–Ω–æ–º—É —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–º—É –∫–æ–¥—É |
| üîÅ –†–µ–∑–µ—Ä–≤–Ω—ã–π –≤—Ö–æ–¥ –ø–æ email| –í—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –±–µ–∑ TOTP |
| üßπ –°–∞–º–æ—É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞  | –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| üì¨ –ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∞ email-—Å—Å—ã–ª–∫–∏ | –ü—Ä–∏ —É—Ç–µ—Ä–µ –ø–∏—Å—å–º–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º |
